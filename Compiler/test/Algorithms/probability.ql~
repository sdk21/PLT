def measure (mat q) = mat outcome {
        
        # returns measurement matrix
        mat adjoint;
        
        adjoint = adj(q);
        outcome = q * adjoint
}

def outcomezero(mat bottom) = int probability{
        
        mat top;
        mat input;
        mat hteni;
        mat cnot;
        mat ynot;
        mat output;
        mat meas;
        
        top = |0>;
        input = top @ bottom;
        
        # tensor product of hadamard and identity
        hteni = H @ Idt;
        cnot = [(1,0,0,0)(0,1,0,0)(0,0,1,0)(0,0,0,1)];
        ynot = [(1,0,0,0)(0,0,0,c(i))(0,0,1,0)(0,c(-i),0,0)];
        
        output = hteni * input;
        output = cnot * output;
        output = ynot * output;
        
        meas = measure(top);
        
        meas = meas @ I;

        output = meas * output;

        probability = norm(output);      
}

def execute() = int outcome{
        
        mat bottom;

        bottom = |1>;
        outcome = outcomezero(bottom);

}
